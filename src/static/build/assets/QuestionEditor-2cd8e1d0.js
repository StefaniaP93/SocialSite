import{_ as l,f as u,e as d,o as c,c as m,a as i,h as p,i as f,j as h}from"./index-612dace3.js";const _={name:"QuestionEditor",props:{slug:{type:String,required:!1}},data(){return{questionBody:null,error:null}},methods:{async performNetworkRequest(){let t=d.questionsCRUD,e="POST";this.slug!==void 0&&this.slug!==""&&(t+=`${this.slug}/`,e="PUT");const n={content:this.questionBody};try{const o=await u({method:e,url:t,data:n});this.$router.push({name:"question-view",params:{slug:o.data.slug}})}catch(o){alert(o.response.statusText)}},onSubmit(){this.questionBody?this.questionBody.length>240?this.error="La domanda non può contenere più di 240 caratteri":this.performNetworkRequest():this.error="Non puoi condividere una domanda vuota!"}},async beforeRouteEnter(t,e,n){if(t.params.slug!==void 0&&t.params.slug!==""){const o=`${d.questionsCRUD}${t.params.slug}/`;try{const s=await u.get(o);return n(r=>r.questionBody=s.data.content)}catch(s){console.log(s.response),alert(s.response.statusText)}}else return n()},created(){document.title="Editor - QuestionTime"}},y={class:"container mt-2"},g=i("h1",null,"Fai una domanda",-1),q=i("button",{type:"submit",class:"btn btn-pink mt-3"},"Pubblica Domanda",-1);function b(t,e,n,o,s,r){return c(),m("div",y,[g,i("form",{onSubmit:e[1]||(e[1]=h((...a)=>r.onSubmit&&r.onSubmit(...a),["prevent"]))},[p(i("textarea",{"onUpdate:modelValue":e[0]||(e[0]=a=>s.questionBody=a),class:"form-control",rows:"5"},null,512),[[f,s.questionBody]]),q],32)])}const v=l(_,[["render",b]]);export{v as default};
